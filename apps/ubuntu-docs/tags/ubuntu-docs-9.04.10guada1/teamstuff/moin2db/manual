= The process =
I installed the moinmoin from breezy. Hacked around a bit and discovered
boatloads of bugs which basically made making the formatter impossible.
Went to the moin channel to complain, and got told that I was using an
ancient version. Got the most recent one directly from their arch
(tla/baz) repositories. Wasted gobs of time getting it to run. Got it
working. Hacked on the docbook stuff and noticed to my pleasure that
most of the bugs in moin I had found earlier been fixed. Found more bugs
in moin, but xorAxAx (Alexander Schremmer) was extremely quick and fixed
most of them. Only a few remain. 

= Done =
The docbook gets generated and it even validates against the dtd most of
the time. With the exception of the macros, survives all of moins
syntax.

= To be done =
 * Tables don't support fancy stuff (alignment etc)
 * Most macros (including TableOfContents and draw:myimage) need to be
fixed
 * bigger (fontsize +1), smaller (fontsize -1) and rule (horizontal
line) don't do anything, since couldn't find suitable stuff in docbook
 * Pagelink and interwiki-link handling is broken, too tired to fix it
now
 * IDs don't get added to elements (like titles), see previous item

= Comments/Notes =

I haven't tested this much. I'm spamming you with this because I believe
in the "release early, release often"-mantra.


== Installing ==
To install the docbook generator, you need to drop the attached file in
the MoinMoin/formatter directory. Then the output can be accessed by
adding "?action=format&mimetype=xml/docbook" to the url.

Example:
http://udu.wiki.ubuntu.com/FrontPage?action=format&mimetype=xml/docbook

Remember that you need to have the latest version
(moin--main--1.3--patch-725 as of this writing) to be able to use it.


== Macros ==
Currently macros directly call the formatter's methods. They need to
call them for each start and end tag. This easily results in invalid
markup, since it's too easy to forget to call the closing tag, or
accidentally putting an element inside something that shouldn't have
that sort of elements (image inside headline). 

In the long run I hope that macros could output moin's own markup to the
page just before it gets parsed. This is how most macros work. Think of
how horrible it would be if macros in C would output gcc's internal
memory structures or pure binary directly, instead of outputting C. 

I'd guesstimate that 99% of the macros wouldn't need anything beyond
moin's own syntax, and they would (almost?) always be valid from the
formatters point of view.



Feedback is very welcome.
Cheers,

Mikko 
